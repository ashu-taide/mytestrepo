version: 1.3.0

services:
  - composer:
      version: 2

variables:
  global:
    CDE_DEPLOY_POLL_TIMEOUT: 3600
    COMPOSER_AUTH:
      secure: 2acHEcfLAjOpWAtydGm7RdiH/pmVODHXniTw/Rg4/WI6YViwRENyee0Pvq2eY1zX7C2ZuqJT0vskflOPSQMT007cUbKZwZ6xD7EtR8IQrV/wV3lCdsM+KASPdHNJ4uCBhEFDlj52H5lsp9mMaEXXB1W9FpEpu/Lr2foeBf5JGjVIEoh/Hk/lPEKPiQ+uDlMxYlFddLw6Re3uiNZiHeIT5On5W0tF4i30zTB4wTIWFx5wPf12hf6HBTUCJP0VYYJZuh1t1OWJ1Hxm1dTQVOs5rvxH1DgIdBhQHQL05UUwhb1BnFXGh7WvtTBhavJeKF053+Kk7UNJ2Ogt6Q505nYf+wwmrbgSHtaA3hqZvd248hhaT6s7c1gonGz1ABr5/+ynbqvIDeIb1cS23NO3HhtuH9ie7h7B97NyaFCGPYyCKM/etEMXSH6KlWmMUr+fSlI7zSuUHAHk+u8wgJBST71CInKCiyogFcY8WOCzGwMijJrPcGwV6L2MU92h2aWo6CUwszvuzQm/ZZh4La+1vdPyr9SikIYW9ZKmMRN2bU8iUqPuMopq11qFFps2qwOZKi+uzXa4E4USw5yEF/NnugbD/oEZx/qMXp0Mzx+PDm6Bu2wtWWIugsiE/p5fOcbffuUFOiTmJilaPGaQp2iROinyDYMz/Iv3oOgZHIAbBy7PW6/JN8=ziRQbZ09g2PuX5Lnm0aw6xJXNZ4EUHugOQPazpU8Mh1D8OVzQ+TRwS3woJ2Wo7Kl6CIHQqLYcXHwG9co0Q+dUHMOTxb5JkKdhALgq0a/Rrq8bzBwn8Wq5NUZehdDTfmc

events:
  build:
    steps:
      # If you have build instructions, put them here. They are not required.
      - build_site:
          script:
          - echo "passing job"
          - exit 1
  post-deploy:
    steps:
      # If you have build instructions, put them here. They are not required.
      - build_site:
          script:
          - echo "passing job"
          - echo $COMPOSER_AUTH
          - exit 1
  fail-on-build:
    steps:
      - check-for-variable:
        script:
          - echo "fail on build"
          - echo $COMPOSER_AUTH
  pr-merged:
    steps:
      - prmerged:
          script:
          - echo "pr merged"
          - echo $COMPOSER_AUTH
  pr-closed:
    steps:
      - prclosed:
          script:
          - echo "pr closed"
          - echo $COMPOSER_AUTH

